<div class="container">

    <form #lancamentoForm="ngForm" (ngSubmit)="salvar()">
        <div class="grid">
    
            <div class="col-12">
                <h1>Novo Lançamento</h1>
            </div>
        
            <div class="col-12 field">
                <p-selectButton name="tipo" #tipo [options]="tipos" [(ngModel)]="lancamento.tipo" optionLabel="label" optionValue="value"></p-selectButton>
            </div>

            <div class="col-3 p-fluid field">
                <label for="vencimento">Vencimento</label>
                <p-calendar id="vencimento" name="vencimento" #vencimento="ngModel" [(ngModel)]="lancamento.dataVencimento" [required]="true" dateFormat="dd/mm/yy"></p-calendar>
                <app-message [control]="vencimento" error="required" text="Selecione uma data para o vencimento."></app-message>
            </div>
    
            <div class="col-3 p-fluid field" *ngIf="tipo.value == 'RECEITA'"> 
                <label for="recebimento">Recebimento</label>
                <p-calendar id="recebimento" name="dataPagamento" [(ngModel)]="lancamento.dataPagamento" dateFormat="dd/mm/yy"></p-calendar>
            </div>

            <div class="col-3 p-fluid field" *ngIf="tipo.value == 'DESPESA'">
                <label for="pagamento" >Pagamento</label>
                <p-calendar id="pagamento" name="dataPagamento" [ngModel]="lancamento.dataPagamento" dateFormat="dd/mm/yy"></p-calendar>
            </div>
    
            <div class="col-9 p-fluid field">
                <label for="descricao">Descrição</label>
                <input pInputText name="descricao" id="descricao" placeholder="Digite uma descrição" required minlength="5" [(ngModel)]="lancamento.descricao" #descricao="ngModel" aria-describedby="descricao-help">

                <app-message [control]="descricao" id="descricao-help" error="required" text="Preencha o campo descrição."></app-message>
                <!-- <small *ngIf="descricao.hasError('required') && descricao.dirty" id="descricao-help" class="p-error block">O Campo descrição é obrigatório.</small> -->
                <app-message [control]="descricao" id="descricao-help" error="minlength" text="Digite no mínimo {{ descricao.errors?.['minlength']?.requiredLength }} caracteres."></app-message>
                <!-- <small *ngIf="descricao.hasError('minLength') && descricao.dirty" id="descricao-help" class="p-error block">Digite no mínimo {{ descricao.errors?.['minlength'].requiredLength }} caracteres.</small> -->
            </div>

            <div class="col-3 p-fluid field">
                <label for="valor">Valor</label>
                <p-inputNumber id="valor" name="valor" mode="currency" currency="BRL" locale="pt-BR" placeholder="0,00" #valor="ngModel" [(ngModel)]="lancamento.valor" [required]="true"></p-inputNumber>
                <app-message [control]="valor" error="required" text="Digite o valor do lançamento."></app-message>
            </div>
            
            <div class="col-6 p-fluid field">
                <label for="categoria">Categoria</label>
                <p-dropdown id="categoria" [options]="categorias" placeholder="Selecione uma categoria" name="categoria" #categoria="ngModel" [(ngModel)]="lancamento.categoria.codigo" [required]="true"></p-dropdown>
                <app-message [control]="categoria" error="required" text="Selecione uma categoria."></app-message>
            </div>
            
            <div class="col-6 p-fluid field">
                <label for="pessoa">Pessoa</label>
                <p-dropdown id="pessoa" [options]="pessoas" placeholder="Selecine uma pessoa" [filter]="true" name="pessoa" #pessoa="ngModel" [(ngModel)]="lancamento.pessoa.codigo" [required]="true"></p-dropdown>
                <app-message [control]="pessoa" error="required" text="Selecione uma pessoa."></app-message>
            </div>
            
            <div class="col-12 p-fluid field">
                <label for="observacao">Observação</label>
                <textarea pInputTextarea id="observacao" name="observacao" rows="4" placeholder="Digite uma descrição para o seu lançamento" [(ngModel)]="lancamento.observacao"></textarea>
            </div>

            <div class="col-12">
                <p-button id="btn-salvar" type="submit" [disabled]="lancamentoForm.invalid?true:false">Salvar</p-button>
                <span class="p-2"></span>
                <p-button type="button">Novo</p-button>
                <span class="p-2"></span>
                <a href="javascript:;">Voltar para a pesquisa</a>
            </div>
        </div>
    </form>
</div>